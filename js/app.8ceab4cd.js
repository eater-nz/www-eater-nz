(function(e){function t(t){for(var a,c,i=t[0],l=t[1],o=t[2],f=0,d=[];f<i.length;f++)c=i[f],r[c]&&d.push(r[c][0]),r[c]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,o||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(a=!1)}a&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={app:0},s=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var o=0;o<i.length;o++)t(i[o]);var u=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"07bb":function(e,t,n){},"0cfb":function(e,t,n){},"454a":function(e,t,n){},"4aa3":function(e,t,n){"use strict";var a=n("454a"),r=n.n(a);r.a},"5ae0":function(e,t,n){},"6afa":function(e,t,n){},"75b2":function(e,t,n){},adf4:function(e,t,n){"use strict";var a=n("5ae0"),r=n.n(a);r.a},b0a0:function(e,t,n){"use strict";var a=n("07bb"),r=n.n(a);r.a},b0cd:function(e,t,n){"use strict";var a=n("6afa"),r=n.n(a);r.a},c471:function(e,t,n){"use strict";var a=n("75b2"),r=n.n(a);r.a},cd49:function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),r=n("9f7b"),s=n.n(r),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("header",[n("places-filter")],1),n("main",{attrs:{role:"main"}},[n(e.view,{tag:"component"})],1)])},i=[],l=n("d225"),o=n("b0b4"),u=n("308d"),f=n("6bb5"),d=n("4e2b"),p=n("9ab4"),b=n("60a3"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark fixed-top"},[n("div",{staticClass:"container"},[n("a",{staticClass:"navbar-brand",attrs:{href:"/"}},[e._v("EATER")]),n("form",{staticClass:"form-inline my-2 my-md-0 ml-auto",on:{submit:function(e){e.preventDefault()}}},[n("input",{staticClass:"form-control mr-sm-2",attrs:{type:"search",placeholder:"Search","aria-label":"Search"},domProps:{value:e.search},on:{input:function(t){e.search=t.target.value}}})]),n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:e.toggleView}},[n("i",{class:"fa fa-"+e.icon})])])])},v=[],g=(n("386d"),function(e){function t(){return Object(l["a"])(this,t),Object(u["a"])(this,Object(f["a"])(t).apply(this,arguments))}return Object(d["a"])(t,e),Object(o["a"])(t,[{key:"isTagActive",value:function(e){return this.$store.getters.filter.tags.indexOf(e)>=0}},{key:"toggleView",value:function(){this.$store.commit("toggleView")}},{key:"search",get:function(){return this.$store.getters.filter.search},set:function(e){this.$store.commit("updateFilterSearch",e)}},{key:"tags",get:function(){return this.$store.getters.filteredTags}},{key:"icon",get:function(){return"Map"===this.$store.getters.view?"list":"map-o"}}]),t}(b["c"]));g=p["a"]([b["a"]],g);var y=g,m=y,O=(n("c471"),n("2877")),P=Object(O["a"])(m,h,v,!1,null,"18f7f24f",null),k=P.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"places-list container"},e._l(e.places,function(t,a){return n("div",{key:a,staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"heading"},[n("h5",[e._v(e._s(t.name))]),n("address",[n("a",{staticClass:"address",attrs:{href:"https://maps.google.com/?q="+t.latlng,target:"_blank"}},[e._v(e._s(e.address(t)))])])]),t.tags?n("ul",{staticClass:"tags"},e._l(t.tags,function(t,a){return n("li",{key:a},[e._v("\n          "+e._s(t)+"\n        ")])}),0):e._e(),n("p",{staticClass:"info"},[e._v(e._s(t.summary))])])])}),0)},x=[],_=(n("28a5"),function(){function e(){Object(l["a"])(this,e)}return Object(o["a"])(e,null,[{key:"contains",value:function(e,t){if(!t||""===t)return!0;if(!e||""===e)return!1;var n=t.toLocaleLowerCase().split(" "),a=n.filter(function(t){return""===t.trim()||e.toLocaleLowerCase().indexOf(t)>=0});return a.length===n.length}},{key:"concat",value:function(e,t){return t&&(e=e.concat(t.split(" "))),e}},{key:"address",value:function(e){var t=e.address.number+" "+e.address.street;return t+=", "+e.address.suburb,t+=e.address.district?", "+e.address.district:"",t}}]),e}()),w=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(f["a"])(t).apply(this,arguments)),e.columns=4,e}return Object(d["a"])(t,e),Object(o["a"])(t,[{key:"address",value:function(e){return _.address(e)}},{key:"places",get:function(){return this.$store.getters.filteredPlaces}}]),t}(b["c"]);w=p["a"]([b["a"]],w);var C=w,$=C,I=(n("adf4"),Object(O["a"])($,j,x,!1,null,"597b04a6",null)),L=I.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"places-map"},[n("l-map",{ref:"map",staticClass:"col-xs-12"},[n("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),e._l(e.places,function(t,a){return n("l-marker",{key:a,attrs:{icon:e.icon(t),"lat-lng":e.latlong(t)},on:{click:function(n){return e.selectPlace(t,a)}}})})],2),e.selectedPlace?n("div",{staticClass:"place-info"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){return e.previous(e.selectedPlaceIndex)}}},[n("i",{staticClass:"fa fa-chevron-left"})]),n("div",{staticClass:"content"},[n("a",{staticClass:"address",attrs:{href:"https://maps.google.com/?q="+e.selectedPlace.latlng,target:"_blank"}},[n("h5",[e._v(e._s(e.selectedPlace.name))]),n("h6",[e._v(e._s(e.address(e.selectedPlace)))])]),n("tags",{attrs:{tags:e.selectedPlace.tags}})],1),n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){return e.next(e.selectedPlaceIndex)}}},[n("i",{staticClass:"fa fa-chevron-right"})])]):e._e()],1)},S=[],A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.tags?n("ul",{staticClass:"tags"},e._l(e.tags,function(t,a){return n("li",{key:a},[e._v("\n      "+e._s(t)+"\n    ")])}),0):e._e()])},T=[],E=function(e){function t(){return Object(l["a"])(this,t),Object(u["a"])(this,Object(f["a"])(t).apply(this,arguments))}return Object(d["a"])(t,e),t}(b["c"]);p["a"]([Object(b["b"])()],E.prototype,"tags",void 0),E=p["a"]([Object(b["a"])({name:"tags"})],E);var B=E,U=B,V=(n("4aa3"),Object(O["a"])(U,A,T,!1,null,"52843da6",null)),z=V.exports,D=n("2699"),F=n("a40a"),q=n("4e2b6"),J=(n("6cc5"),n("e11e")),R=(n("b24d"),n("bfac"),function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(f["a"])(t).apply(this,arguments)),e.standardIcon=J["AwesomeMarkers"].icon({prefix:"fa",icon:"cutlery",markerColor:"green"}),e.selectedIcon=J["AwesomeMarkers"].icon({prefix:"fa",icon:"cutlery",markerColor:"red"}),e}return Object(d["a"])(t,e),Object(o["a"])(t,[{key:"onPlacesChange",value:function(e,t){this.fitBounds()}},{key:"selectPlace",value:function(e,t){this.$store.commit("selectPlace",t)}},{key:"icon",value:function(e){return e===this.selectedPlace?this.selectedIcon:this.standardIcon}},{key:"latlong",value:function(e){var t=e.latlng.split(",");return J["latLng"](+t[0],+t[1])}},{key:"previous",value:function(e){var t=e-1;this.$store.commit("selectPlace",t<0?this.places.length-1:t)}},{key:"next",value:function(e){var t=e+1;this.$store.commit("selectPlace",t===this.places.length?0:t)}},{key:"mounted",value:function(){this.fitBounds()}},{key:"address",value:function(e){return e.address.number+" "+e.address.street+", "+e.address.suburb}},{key:"fitBounds",value:function(){if(this.places&&this.places.length>0){var e=this.places.map(function(e){var t=e.latlng.split(",");return J["latLng"](+t[0],+t[1])}),t=this.$refs.map;t.fitBounds(e)}}},{key:"zoom",get:function(){return 13}},{key:"center",get:function(){return J["latLng"](47.41322,-1.219482)}},{key:"url",get:function(){return"http://{s}.tile.osm.org/{z}/{x}/{y}.png"}},{key:"attribution",get:function(){return'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}},{key:"places",get:function(){return this.$store.getters.filteredPlaces}},{key:"selectedPlace",get:function(){return this.$store.getters.selectedPlace}},{key:"selectedPlaceIndex",get:function(){return this.$store.getters.selectedPlaceIndex}}]),t}(b["c"]));p["a"]([Object(b["d"])("places")],R.prototype,"onPlacesChange",null),R=p["a"]([Object(b["a"])({components:{Tags:z,"l-map":D["a"],"l-tile-layer":F["a"],"l-marker":q["a"]}})],R);var G=R,H=G,K=(n("b0cd"),Object(O["a"])(H,M,S,!1,null,null,null)),N=K.exports,Q=function(e){function t(){return Object(l["a"])(this,t),Object(u["a"])(this,Object(f["a"])(t).apply(this,arguments))}return Object(d["a"])(t,e),Object(o["a"])(t,[{key:"view",get:function(){return"Places"+this.$store.getters.view}}]),t}(b["c"]);Q=p["a"]([Object(b["a"])({components:{PlacesList:L,PlacesFilter:k,PlacesMap:N},mounted:function(){this.$store.dispatch("fetchPlaces")}})],Q);var W=Q,X=W,Y=(n("cf25"),n("b0a0"),Object(O["a"])(X,c,i,!1,null,null,null)),Z=Y.exports,ee=(n("7f7f"),n("7514"),n("5d73")),te=n.n(ee),ne=function e(){Object(l["a"])(this,e),this.search="",this.tags=new Array},ae=n("2f62"),re=n("bc3a"),se=n.n(re);a["default"].use(ae["a"]);var ce=new ae["a"].Store({state:{view:"List",places:new Array,tags:new Array,filter:new ne,selectedPlace:-1},mutations:{updatePlaces:function(e,t){e.selectedPlace=-1,e.places=t||new Array;var n=new Array,a=!0,r=!1,s=void 0;try{for(var c,i=te()(e.places);!(a=(c=i.next()).done);a=!0){var l=c.value;l.tags&&(n=n.concat(l.tags))}}catch(o){r=!0,s=o}finally{try{a||null==i.return||i.return()}finally{if(r)throw s}}e.tags=n.filter(function(e,t,n){return n.indexOf(e)===t})},updateFilterSearch:function(e,t){e.selectedPlace=-1,e.filter.search=t||""},toggleView:function(e,t){e.view="Map"===e.view?"List":"Map"},selectPlace:function(e,t){void 0===t||t===e.selectedPlace?e.selectedPlace=-1:e.selectedPlace=t}},getters:{view:function(e,t){return e.view},filteredPlaces:function(e,t){return e.places.filter(function(t){var n=e.filter.search.toLocaleLowerCase().split(" "),a=n.filter(function(e){return""===e.trim()||t.index.find(function(t){return _.contains(t,e)})});return a.length===n.length})},filteredTags:function(e,t){return t.tags.filter(function(t){return!!e.filter.search&&!!_.contains(t,e.filter.search)})},tags:function(e,t){return e.tags},filter:function(e,t){return e.filter},selectedPlace:function(e,t){return e.selectedPlace>=0?t.filteredPlaces[e.selectedPlace]:null},selectedPlaceIndex:function(e,t){return e.selectedPlace>=0?e.selectedPlace:null}},actions:{fetchPlaces:function(e){var t=e.commit;se.a.get("http://api.eater.nz/places.json").then(function(e){var n=e.data.map(function(e){return e.index=new Array,e.address&&(e.index=_.concat(e.index,e.address.city),e.index=_.concat(e.index,e.address.district),e.index=_.concat(e.index,e.address.number),e.index=_.concat(e.index,e.address.postCode),e.index=_.concat(e.index,e.address.street),e.index=_.concat(e.index,e.address.suburb)),e.index=_.concat(e.index,e.name),e.index=e.index.concat(e.tags),e});t("updatePlaces",n)},function(e){console.error(e)})}}});n("f9e3"),n("2dd8");a["default"].use(s.a),a["default"].config.productionTip=!1;var ie=n("e11e");delete ie.Icon.Default.prototype._getIconUrl;var le=n("584d"),oe=n("6397"),ue=n("e2b9");ie.Icon.Default.mergeOptions({iconRetinaUrl:le,iconUrl:oe,shadowUrl:ue}),new a["default"]({render:function(e){return e(Z)},store:ce}).$mount("#app")},cf25:function(e,t,n){"use strict";var a=n("0cfb"),r=n.n(a);r.a}});
//# sourceMappingURL=app.8ceab4cd.js.map