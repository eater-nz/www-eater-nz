(function(t){function e(e){for(var n,c,i=e[0],l=e[1],o=e[2],f=0,d=[];f<i.length;f++)c=i[f],s[c]&&d.push(s[c][0]),s[c]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,o||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,i=1;i<a.length;i++){var l=a[i];0!==s[l]&&(n=!1)}n&&(r.splice(e--,1),t=c(c.s=a[0]))}return t}var n={},s={app:0},r=[];function c(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=t,c.c=n,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(a,n,function(e){return t[e]}.bind(null,n));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var o=0;o<i.length;o++)e(i[o]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"07bb":function(t,e,a){},"0cfb":function(t,e,a){},"0f14":function(t,e,a){},"2b09":function(t,e,a){},"447a":function(t,e,a){"use strict";var n=a("eb59"),s=a.n(n);s.a},"69f4":function(t,e,a){"use strict";var n=a("9b70"),s=a.n(n);s.a},"6aae":function(t,e,a){},"7e63":function(t,e,a){"use strict";var n=a("0f14"),s=a.n(n);s.a},"935b":function(t,e,a){"use strict";var n=a("6aae"),s=a.n(n);s.a},"9b70":function(t,e,a){},a542:function(t,e,a){},a7d8:function(t,e,a){"use strict";var n=a("2b09"),s=a.n(n);s.a},b0a0:function(t,e,a){"use strict";var n=a("07bb"),s=a.n(n);s.a},c95a:function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),s=a("9f7b"),r=a.n(s),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("header",[a("search")],1),a("main",{attrs:{role:"main"}},[a(t.view,{tag:"component"})],1)])},i=[],l=a("d225"),o=a("b0b4"),u=a("308d"),f=a("6bb5"),d=a("4e2b"),p=a("9ab4"),b=a("60a3"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark fixed-top"},[a("div",{staticClass:"container-fluid"},[a("a",{staticClass:"navbar-brand d-sm-block",attrs:{href:"/"}},[t._v("EATER")]),a("form",{staticClass:"form-inline my-2 my-md-0 ml-auto",on:{submit:function(t){t.preventDefault()}}},[a("input",{staticClass:"form-control mr-sm-2",attrs:{type:"search",placeholder:"Search","aria-label":"Search"},domProps:{value:t.search},on:{input:function(e){t.search=e.target.value},blur:t.track}})]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.toggleView}},[a("i",{class:"fa fa-"+t.icon})])])])},v=[],g=(a("386d"),a("28a5"),function(){function t(){Object(l["a"])(this,t)}return Object(o["a"])(t,null,[{key:"contains",value:function(t,e){if(!e||""===e)return!0;if(!t||""===t)return!1;var a=e.toLocaleLowerCase().split(" "),n=a.filter(function(e){return""===e.trim()||t.toLocaleLowerCase().indexOf(e)>=0});return n.length===a.length}},{key:"concat",value:function(t,e){return e&&(t=t.concat(e.split(" "))),t}},{key:"address",value:function(t){var e=t.address.number+" "+t.address.street;return e+=", "+t.address.suburb,e+=t.address.district?", "+t.address.district:"",e}},{key:"getTrackingUrl",value:function(t,e){var a="/"+t.toLowerCase();return e&&e.length>0&&(a+="?q="+e),a}}]),t}()),m=function(t){function e(){return Object(l["a"])(this,e),Object(u["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(d["a"])(e,t),Object(o["a"])(e,[{key:"track",value:function(){this.$ga.page(g.getTrackingUrl(this.$store.getters.view.toLowerCase(),this.$store.getters.filter.search))}},{key:"isTagActive",value:function(t){return this.$store.getters.filter.tags.indexOf(t)>=0}},{key:"toggleView",value:function(){this.$store.commit("toggleView")}},{key:"search",get:function(){return this.$store.getters.filter.search},set:function(t){this.$store.commit("updateFilterSearch",t)}},{key:"tags",get:function(){return this.$store.getters.filteredTags}},{key:"icon",get:function(){return"Map"===this.$store.getters.view?"list":"map-o"}}]),e}(b["c"]);m=p["a"]([b["a"]],m);var y=m,O=y,k=(a("7e63"),a("2877")),j=Object(k["a"])(O,h,v,!1,null,"767d20a6",null),x=j.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"places-list container"},t._l(t.places,function(e,n){return a("div",{key:n,staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"heading"},[a("h5",[t._v(t._s(e.name))]),a("address",[a("a",{staticClass:"address",attrs:{href:"https://maps.google.com/?q="+e.latlng,target:"_blank"}},[t._v(t._s(t.address(e)))])])]),e.tags?a("ul",{staticClass:"tags"},t._l(e.tags,function(e,n){return a("li",{key:n},[t._v("\n          "+t._s(e)+"\n        ")])}),0):t._e(),a("p",{staticClass:"info"},[t._v(t._s(e.summary))])])])}),0)},C=[],w=function(t){function e(){var t;return Object(l["a"])(this,e),t=Object(u["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.columns=4,t}return Object(d["a"])(e,t),Object(o["a"])(e,[{key:"address",value:function(t){return g.address(t)}},{key:"mounted",value:function(){this.$ga.page(g.getTrackingUrl(this.$store.getters.view.toLowerCase(),this.$store.getters.filter.search))}},{key:"places",get:function(){return this.$store.getters.filteredPlaces}}]),e}(b["c"]);w=p["a"]([b["a"]],w);var P=w,$=P,L=(a("69f4"),Object(k["a"])($,_,C,!1,null,"adb237ec",null)),T=L.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"places-map"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-9 col-lg-8 col-sm-7"},[a("l-map",{ref:"map"},[a("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),t._l(t.places,function(e,n){return a("l-marker",{key:n,attrs:{icon:t.icon(e),"lat-lng":t.latlong(e)},on:{click:function(e){return t.selectPlace(n)}}})})],2)],1),a("div",{staticClass:"col-xl-3 col-lg-4 col-sm-5 panel d-sm-block"},[t.selectedPlace?a("panel-place-detail",{attrs:{place:t.selectedPlace,next:t.next,previous:t.previous},on:{next:t.next,previous:t.previous,close:t.selectPlace}}):t._e(),t.selectedPlace?t._e():a("panel-places-list",{attrs:{places:t.places},on:{selectPlace:t.selectPlace}})],1)]),t.selectedPlace?a("div",{staticClass:"mini-panel-place-detail d-sm-none"},[a("mini-panel-place-detail",{attrs:{place:t.selectedPlace,next:t.next,previous:t.previous},on:{next:t.next,previous:t.previous,close:t.selectPlace}})],1):t._e()])])},S=[],A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel-places-list"},[a("div",{staticClass:"d-flex flex-column bd-highlight mb-3"},t._l(t.places,function(e,n){return a("div",{key:n,staticClass:"bd-highlight place",on:{click:function(e){return t.$emit("selectPlace",n)}}},[t._v("\n      "+t._s(e.name)+"\n      "),a("tags",{attrs:{tags:e.tags,filter:!0}})],1)}),0)])},M=[],E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.tags?a("ul",{staticClass:"tags"},t._l(t.filteredTags,function(e,n){return a("li",{key:n},[t._v("\n      "+t._s(e)+"\n    ")])}),0):t._e()])},U=[],q=function(t){function e(){return Object(l["a"])(this,e),Object(u["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(d["a"])(e,t),Object(o["a"])(e,[{key:"filteredTags",get:function(){if(!this.filter||!this.tags)return this.tags;var t=this.tags.filter(function(t){return t&&-1===t.indexOf("cheapeats")});return t.length<this.tags.length&&t.push("cheapeats"),t}}]),e}(b["c"]);p["a"]([Object(b["b"])()],q.prototype,"tags",void 0),p["a"]([Object(b["b"])()],q.prototype,"filter",void 0),q=p["a"]([Object(b["a"])({name:"tags"})],q);var z=q,B=z,V=(a("ee16"),Object(k["a"])(B,E,U,!1,null,"6129c19e",null)),D=V.exports,F=function(t){function e(){return Object(l["a"])(this,e),Object(u["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(d["a"])(e,t),Object(o["a"])(e,[{key:"address",value:function(t){return t.address.number+" "+t.address.street+", "+t.address.suburb}}]),e}(b["c"]);p["a"]([Object(b["b"])()],F.prototype,"places",void 0),F=p["a"]([Object(b["a"])({name:"panel-place-list",components:{Tags:D}})],F);var J=F,N=J,R=(a("e621"),Object(k["a"])(N,A,M,!1,null,"44bc8774",null)),G=R.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"d-flex flex-row bd-highlight mb-3 buttons"},[a("button",{staticClass:"btn btn-secondary previous-place",attrs:{type:"button"},on:{click:function(e){return t.$emit("previous")}}},[a("i",{staticClass:"fa fa-chevron-left"}),a("span",{staticClass:"d-md-inline"},[t._v(" Previous")])]),a("button",{staticClass:"btn btn-secondary next-place",attrs:{type:"button"},on:{click:function(e){return t.$emit("next")}}},[a("span",{staticClass:"d-md-inline"},[t._v("Next ")]),a("i",{staticClass:"fa fa-chevron-right"})]),a("div",{staticClass:"filler"}),a("button",{staticClass:"btn btn-secondary close-place",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[a("span",{staticClass:"d-md-inline"},[t._v("Close ")]),a("i",{staticClass:"fa fa-window-close"})])]),a("h5",[t._v(t._s(t.place.name))]),a("a",{staticClass:"address btn btn-link",attrs:{role:"button",href:"https://maps.google.com/?q="+t.place.latlng,target:"_blank"}},[t._v("\n    "+t._s(t.address(t.place))+" "),a("i",{staticClass:"fa fa-external-link"})]),a("tags",{attrs:{tags:t.place.tags}}),a("p",{staticClass:"summary"},[t._v(t._s(t.place.summary))])],1)},K=[],Q=function(t){function e(){return Object(l["a"])(this,e),Object(u["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(d["a"])(e,t),Object(o["a"])(e,[{key:"address",value:function(t){return t.address.number+" "+t.address.street+", "+t.address.suburb}}]),e}(b["c"]);p["a"]([Object(b["b"])()],Q.prototype,"place",void 0),Q=p["a"]([Object(b["a"])({name:"panel-place-detail",components:{Tags:D}})],Q);var W=Q,X=W,Y=(a("a7d8"),Object(k["a"])(X,H,K,!1,null,"1c94a4fc",null)),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"d-flex flex-row bd-highlight buttons"},[a("button",{staticClass:"btn btn-secondary previous-place",attrs:{type:"button"},on:{click:function(e){return t.$emit("previous")}}},[a("i",{staticClass:"fa fa-chevron-left"}),t._v(" Previous\n    ")]),a("button",{staticClass:"btn btn-secondary next-place",attrs:{type:"button"},on:{click:function(e){return t.$emit("next")}}},[t._v("\n      Next "),a("i",{staticClass:"fa fa-chevron-right"})]),a("div",{staticClass:"filler"}),a("button",{staticClass:"btn btn-secondary close-place",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v("\n      Close "),a("i",{staticClass:"fa fa-window-close"})])]),a("h5",[t._v(t._s(t.place.name))]),a("a",{staticClass:"address btn btn-link",attrs:{role:"button",href:"https://maps.google.com/?q="+t.place.latlng,target:"_blank"}},[t._v("\n    "+t._s(t.address(t.place))+" "),a("i",{staticClass:"fa fa-external-link"})]),a("tags",{attrs:{tags:t.place.tags,filter:"true"}})],1)},et=[],at=function(t){function e(){return Object(l["a"])(this,e),Object(u["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(d["a"])(e,t),Object(o["a"])(e,[{key:"address",value:function(t){return t.address.number+" "+t.address.street+", "+t.address.suburb}}]),e}(b["c"]);p["a"]([Object(b["b"])()],at.prototype,"place",void 0),at=p["a"]([Object(b["a"])({name:"minipanel-place-detail",components:{Tags:D}})],at);var nt=at,st=nt,rt=(a("935b"),Object(k["a"])(st,tt,et,!1,null,"e11e77ea",null)),ct=rt.exports,it=a("2699"),lt=a("a40a"),ot=a("4e2b6"),ut=(a("6cc5"),a("e11e")),ft=(a("b24d"),a("bfac"),function(t){function e(){var t;return Object(l["a"])(this,e),t=Object(u["a"])(this,Object(f["a"])(e).apply(this,arguments)),t.standardIcon=ut["AwesomeMarkers"].icon({prefix:"fa",icon:"cutlery",markerColor:"green"}),t.selectedIcon=ut["AwesomeMarkers"].icon({prefix:"fa",icon:"cutlery",markerColor:"red"}),t}return Object(d["a"])(e,t),Object(o["a"])(e,[{key:"onPlacesChange",value:function(t,e){this.fitBounds()}},{key:"selectPlace",value:function(t){this.$store.commit("selectPlace",t)}},{key:"icon",value:function(t){return t===this.selectedPlace?this.selectedIcon:this.standardIcon}},{key:"latlong",value:function(t){var e=t.latlng.split(",");return ut["latLng"](+e[0],+e[1])}},{key:"previous",value:function(){var t=this.$store.getters.selectedPlaceIndex-1;this.$store.commit("selectPlace",t<0?this.places.length-1:t)}},{key:"next",value:function(){var t=this.$store.getters.selectedPlaceIndex+1;this.$store.commit("selectPlace",t===this.places.length?0:t)}},{key:"mounted",value:function(){this.$ga.page(g.getTrackingUrl(this.$store.getters.view.toLowerCase(),this.$store.getters.filter.search)),this.fitBounds()}},{key:"fitBounds",value:function(){if(this.places&&this.places.length>0){var t=this.places.map(function(t){var e=t.latlng.split(",");return ut["latLng"](+e[0],+e[1])}),e=this.$refs.map;e.fitBounds(t)}}},{key:"zoom",get:function(){return 13}},{key:"center",get:function(){return ut["latLng"](47.41322,-1.219482)}},{key:"url",get:function(){return"http://{s}.tile.osm.org/{z}/{x}/{y}.png"}},{key:"attribution",get:function(){return'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}},{key:"places",get:function(){return this.$store.getters.filteredPlaces}},{key:"selectedPlace",get:function(){return this.$store.getters.selectedPlace}},{key:"selectedPlaceIndex",get:function(){return this.$store.getters.selectedPlaceIndex}}]),e}(b["c"]));p["a"]([Object(b["d"])("places")],ft.prototype,"onPlacesChange",null),ft=p["a"]([Object(b["a"])({components:{"panel-places-list":G,"panel-place-detail":Z,"mini-panel-place-detail":ct,"l-map":it["a"],"l-tile-layer":lt["a"],"l-marker":ot["a"]}})],ft);var dt=ft,pt=dt,bt=(a("447a"),Object(k["a"])(pt,I,S,!1,null,null,null)),ht=bt.exports,vt=function(t){function e(){return Object(l["a"])(this,e),Object(u["a"])(this,Object(f["a"])(e).apply(this,arguments))}return Object(d["a"])(e,t),Object(o["a"])(e,[{key:"mounted",value:function(){this.$store.dispatch("fetchPlaces")}},{key:"view",get:function(){return this.$store.getters.view}}]),e}(b["c"]);vt=p["a"]([Object(b["a"])({components:{List:T,Search:x,Map:ht}})],vt);var gt=vt,mt=gt,yt=(a("cf25"),a("b0a0"),Object(k["a"])(mt,c,i,!1,null,null,null)),Ot=yt.exports,kt=(a("7f7f"),a("7514"),a("5d73")),jt=a.n(kt),xt=function t(){Object(l["a"])(this,t),this.search="",this.tags=new Array},_t=a("2f62"),Ct=a("bc3a"),wt=a.n(Ct);n["default"].use(_t["a"]);var Pt=new _t["a"].Store({state:{view:"List",places:new Array,tags:new Array,filter:new xt,selectedPlace:-1},mutations:{updatePlaces:function(t,e){t.selectedPlace=-1,t.places=e||new Array;var a=new Array,n=!0,s=!1,r=void 0;try{for(var c,i=jt()(t.places);!(n=(c=i.next()).done);n=!0){var l=c.value;l.tags&&(a=a.concat(l.tags))}}catch(o){s=!0,r=o}finally{try{n||null==i.return||i.return()}finally{if(s)throw r}}t.tags=a.filter(function(t,e,a){return a.indexOf(t)===e})},updateFilterSearch:function(t,e){t.selectedPlace=-1,t.filter.search=e||""},toggleView:function(t,e){t.view="Map"===t.view?"List":"Map"},selectPlace:function(t,e){void 0===e||e===t.selectedPlace?t.selectedPlace=-1:t.selectedPlace=e}},getters:{view:function(t,e){return t.view},filteredPlaces:function(t,e){return t.places.filter(function(e){var a=t.filter.search.toLocaleLowerCase().split(" "),n=a.filter(function(t){return""===t.trim()||e.index.find(function(e){return g.contains(e,t)})});return n.length===a.length})},filteredTags:function(t,e){return e.tags.filter(function(e){return!!t.filter.search&&!!g.contains(e,t.filter.search)})},tags:function(t,e){return t.tags},filter:function(t,e){return t.filter},selectedPlace:function(t,e){return t.selectedPlace>=0?e.filteredPlaces[t.selectedPlace]:null},selectedPlaceIndex:function(t,e){return t.selectedPlace>=0?t.selectedPlace:null}},actions:{fetchPlaces:function(t){var e=t.commit;wt.a.get("https://raw.githubusercontent.com/eater-nz/api-eater-nz/master/places.json").then(function(t){var a=t.data.map(function(t){return t.index=new Array,t.address&&(t.index=g.concat(t.index,t.address.city),t.index=g.concat(t.index,t.address.district),t.index=g.concat(t.index,t.address.number),t.index=g.concat(t.index,t.address.postCode),t.index=g.concat(t.index,t.address.street),t.index=g.concat(t.index,t.address.suburb)),t.index=g.concat(t.index,t.name),t.index=t.index.concat(t.tags),t});e("updatePlaces",a)},function(t){console.error(t)})}}}),$t=(a("f9e3"),a("2dd8"),a("0284")),Lt=a.n($t);n["default"].config.productionTip=!1,n["default"].use(r.a),n["default"].use(Lt.a,{id:"UA-135939226-1"});var Tt=a("e11e");delete Tt.Icon.Default.prototype._getIconUrl;var It=a("584d"),St=a("6397"),At=a("e2b9");Tt.Icon.Default.mergeOptions({iconRetinaUrl:It,iconUrl:St,shadowUrl:At}),new n["default"]({render:function(t){return t(Ot)},store:Pt}).$mount("#app")},cf25:function(t,e,a){"use strict";var n=a("0cfb"),s=a.n(n);s.a},e621:function(t,e,a){"use strict";var n=a("a542"),s=a.n(n);s.a},eb59:function(t,e,a){},ee16:function(t,e,a){"use strict";var n=a("c95a"),s=a.n(n);s.a}});
//# sourceMappingURL=app.ad1aec7a.js.map